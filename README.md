# æ°´æºç¤¾åŒºç”¨æˆ· Emoji ç»Ÿè®¡å·¥å…·

ä¸€ä¸ªç”¨äºç»Ÿè®¡æ°´æºç¤¾åŒºç”¨æˆ·å‘è¨€ä¸­ emoji ä½¿ç”¨æƒ…å†µçš„ç‹¬ç«‹å·¥å…·ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š ç»Ÿè®¡ç”¨æˆ·æ‰€æœ‰å›å¤ä¸­çš„ Emoji ä½¿ç”¨æƒ…å†µ
- ğŸ¯ æ”¯æŒå¤šç§ Emoji æ ¼å¼ï¼ˆUnicodeã€çŸ­ä»£ç ã€HTML å›¾ç‰‡ï¼‰
- ğŸ“ˆ ç”Ÿæˆè¯¦ç»†ç»Ÿè®¡æŠ¥å‘Šï¼ˆJSON + Markdownï¼‰
- ğŸ‘¥ æ”¯æŒæ‰¹é‡åˆ†æå¤šä¸ªç”¨æˆ·
- ğŸ“ æŒ‰è¯é¢˜åˆ†ç±»ç»Ÿè®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. è®¾ç½® Cookie

**æ–¹å¼ä¸€ï¼šå‘½ä»¤è¡Œè®¾ç½®**
```bash
python user_emoji_stats.py --set-cookie "ä½ çš„Cookieå­—ç¬¦ä¸²"
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶**
åˆ›å»º `cookies.txt` æ–‡ä»¶ï¼Œç²˜è´´ä½ çš„ Cookie å†…å®¹ã€‚

**å¦‚ä½•è·å– Cookieï¼Ÿ**
1. æ‰“å¼€æµè§ˆå™¨ï¼Œç™»å½•æ°´æºç¤¾åŒº
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. æ‰¾åˆ° Networkï¼ˆç½‘ç»œï¼‰æ ‡ç­¾
4. åˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°ä»»æ„è¯·æ±‚
5. æ‰¾åˆ° Cookie å­—æ®µï¼Œå¤åˆ¶æ•´ä¸ªå€¼

### 3. å¼€å§‹ä½¿ç”¨

**åˆ†æå•ä¸ªç”¨æˆ·ï¼š**
```bash
python user_emoji_stats.py krm_desuwa
```

**æ‰¹é‡åˆ†æå¤šä¸ªç”¨æˆ·ï¼š**
```bash
python user_emoji_stats.py -b user1 user2 user3
```

**é™åˆ¶åˆ†æé¡µæ•°ï¼ˆå¿«é€Ÿé¢„è§ˆï¼‰ï¼š**
```bash
python user_emoji_stats.py krm_desuwa -p 5
```

**æŒ‰æ—¶é—´çª—å£ç»Ÿè®¡ï¼ˆISO8601ï¼‰ï¼š**
```bash
# ç»Ÿè®¡ 2024 å¹´å…¨å¹´çš„ä½¿ç”¨æƒ…å†µ
python user_emoji_stats.py krm_desuwa --since 2024-01-01T00:00:00Z --until 2024-12-31T23:59:59Z

# ä¹Ÿå¯äº¤äº’è¾“å…¥ï¼ˆç›´æ¥å›è½¦è·³è¿‡ï¼‰
python user_emoji_stats.py
```

**äº¤äº’æ¨¡å¼ï¼š**
```bash
python user_emoji_stats.py
```

**å›¾å½¢ç•Œé¢ï¼ˆæŒ‰å¤©é€‰æ‹©æ—¶é—´çª—å£ï¼‰ï¼š**
```bash
python user_emoji_stats.py --gui
```
åœ¨ GUI ä¸­ï¼š
- è¾“å…¥ç”¨æˆ·å
- é€‰æ‹©å¼€å§‹/ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼Œå¯ç•™ç©ºï¼Œå†…ç½®æ—¥å†é€‰å–å™¨ï¼‰
- å¯é€‰æœ€å¤§é¡µæ•°
- ç‚¹å‡»â€œå¼€å§‹åˆ†æâ€ï¼Œå®Œæˆåâ€œæ‰“å¼€è¾“å‡ºç›®å½•â€æŸ¥çœ‹æŠ¥å‘Šä¸å›¾è¡¨
 - æä¾›å¿«æ·æŒ‰é’®ï¼šæœ€è¿‘7å¤© / æœ€è¿‘30å¤© / æœ¬æœˆ / ä»Šå¹´

å¦‚é‡æœªå®‰è£… tkcalendarï¼Œå°†è‡ªåŠ¨å›é€€ä¸ºæ‰‹åŠ¨è¾“å…¥æ—¥æœŸï¼›å®‰è£…ï¼š
```bash
pip install tkcalendar
```

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### ç»ˆç«¯è¾“å‡º
```
==============================================================
ç”¨æˆ· @krm_desuwa çš„ Emoji ä½¿ç”¨ç»Ÿè®¡
==============================================================
æ€»å›å¤æ•°: 1250
åŒ…å« Emoji çš„å›å¤æ•°: 380
Emoji ä½¿ç”¨ç‡: 30.40%
Emoji æ€»æ•°: 856
ä¸åŒ Emoji ç§ç±»: 42

--------------------------------------------------------------
Top 10 æœ€å¸¸ç”¨ Emoji:
--------------------------------------------------------------
 1. ğŸ˜€                    :  156 æ¬¡ (18.22%)
 2. â¤ï¸                    :  124 æ¬¡ (14.49%)
 3. ğŸ‘                    :   98 æ¬¡ (11.45%)
...
==============================================================
```

### ä¿å­˜çš„æ–‡ä»¶

æ–‡ä»¶ä¿å­˜åœ¨ `./emoji_stats_output/` ç›®å½•ï¼š
- `{username}_emoji_stats.json` - å®Œæ•´ç»Ÿè®¡æ•°æ®
- `{username}_emoji_report.md` - è¯¦ç»†æŠ¥å‘Šï¼ˆMarkdownï¼‰
- `{username}_top10.png` - Top10 è¡¨æƒ…æŸ±çŠ¶å›¾ï¼ˆè‡ªåŠ¨åµŒå…¥ Markdownï¼‰
- `comparison_report.md` - å¤šç”¨æˆ·å¯¹æ¯”ï¼ˆæ‰¹é‡åˆ†ææ—¶ï¼‰

## ğŸ“ å‘½ä»¤è¡Œå‚æ•°

```
python user_emoji_stats.py [-h] [-b USER1 USER2 ...] [-p MAX_PAGES] [--set-cookie COOKIE] [username]

ä½ç½®å‚æ•°:
  username              è¦åˆ†æçš„ç”¨æˆ·å

å¯é€‰å‚æ•°:
  -h, --help            æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -b, --batch USER1 USER2 ...
                        æ‰¹é‡åˆ†æå¤šä¸ªç”¨æˆ·
  -p MAX_PAGES, --max-pages MAX_PAGES
                        æœ€å¤§åˆ†æé¡µæ•°ï¼ˆé»˜è®¤: å…¨éƒ¨ï¼‰
  --since SINCE         å¼€å§‹æ—¶é—´ (ISO8601, å¦‚ 2024-01-01T00:00:00Z)
  --until UNTIL         ç»“æŸæ—¶é—´ (ISO8601, å¦‚ 2024-12-31T23:59:59Z)
  --set-cookie COOKIE   è®¾ç½® Cookie
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¿«é€ŸæŸ¥çœ‹æŸäººçš„ emoji é£æ ¼
```bash
python user_emoji_stats.py username -p 3
```
åªçœ‹å‰3é¡µï¼ˆçº¦90æ¡å›å¤ï¼‰ï¼Œå¿«é€Ÿäº†è§£

### åœºæ™¯ 2ï¼šå®Œæ•´åˆ†æè‡ªå·±çš„ emoji ä¹ æƒ¯
```bash
python user_emoji_stats.py your_username
```
åˆ†ææ‰€æœ‰å›å¤

### åœºæ™¯ 3ï¼šå¯¹æ¯”å¤šä¸ªç”¨æˆ·
```bash
python user_emoji_stats.py -b alice bob charlie
```
ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š

## ğŸ“ é¡¹ç›®ç»“æ„

```
emoji_stats/
â”œâ”€â”€ user_emoji_stats.py   # ä¸»ç¨‹åº
â”œâ”€â”€ http_utils.py          # HTTP è¯·æ±‚å·¥å…·
â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ cookies.txt            # Cookie æ–‡ä»¶ï¼ˆéœ€åˆ›å»ºï¼‰
â””â”€â”€ emoji_stats_output/    # è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
```

## ğŸ”§ æŠ€æœ¯å®ç°

### æ”¯æŒçš„ Emoji æ ¼å¼

1. **Unicode Emoji**
   - ç¤ºä¾‹ï¼šğŸ˜€ ğŸ˜ƒ ğŸ‘ â¤ï¸
   - è¯†åˆ«ï¼šæ­£åˆ™åŒ¹é… Unicode å­—ç¬¦èŒƒå›´

2. **Discourse çŸ­ä»£ç **
   - ç¤ºä¾‹ï¼š`:smile:` `:heart:` `:+1:`
   - è¯†åˆ«ï¼šæ­£åˆ™åŒ¹é… `:name:` æ ¼å¼

3. **HTML å›¾ç‰‡æ ‡ç­¾**
   - ç¤ºä¾‹ï¼š`<img class="emoji" ...>`
   - è¯†åˆ«ï¼šBeautifulSoup è§£æ

### API ä½¿ç”¨

ä½¿ç”¨ Discourse çš„ç”¨æˆ·æ´»åŠ¨ APIï¼š
```
https://shuiyuan.sjtu.edu.cn/user_actions.json?username={username}&filter=5&offset={offset}
```

- `filter=5`ï¼šç­›é€‰å›å¤ç±»å‹
- `offset`ï¼šåˆ†é¡µåç§»ï¼ˆæ¯é¡µ30æ¡ï¼‰

### ç‰¹æ€§

- âœ… è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆç½‘ç»œæ•…éšœæ—¶ï¼‰
- âœ… Session å¤ç”¨ï¼ˆæé«˜æ€§èƒ½ï¼‰
- âœ… åˆ†é¡µè·å–ï¼ˆæ”¯æŒå¤§é‡æ•°æ®ï¼‰
- âœ… å¼‚å¸¸å¤„ç†ï¼ˆä¼˜é›…é™çº§ï¼‰
- âœ… è¿›åº¦æç¤ºï¼ˆå®æ—¶åé¦ˆï¼‰

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ‰¾åˆ°ç”¨æˆ·åï¼Ÿ
**A**: ç”¨æˆ·ä¸»é¡µ URL ä¸­ `/u/` åé¢çš„éƒ¨åˆ†ï¼š
```
https://shuiyuan.sjtu.edu.cn/u/krm_desuwa/activity/replies
                                  ^^^^^^^^^
                                  è¿™å°±æ˜¯ç”¨æˆ·å
```

### Q: åˆ†æéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**A**: 
- å‰3é¡µï¼ˆçº¦90æ¡ï¼‰ï¼š3-5ç§’
- å‰10é¡µï¼ˆçº¦300æ¡ï¼‰ï¼š10-15ç§’
- 1000æ¡å›å¤ï¼š30-50ç§’
- å–å†³äºç½‘ç»œé€Ÿåº¦

### Q: Cookie ä¼šè¿‡æœŸå—ï¼Ÿ
**A**: æ˜¯çš„ã€‚å¦‚æœæç¤ºç™»å½•å¤±è´¥ï¼Œé‡æ–°è®¾ç½® Cookieï¼š
```bash
python user_emoji_stats.py --set-cookie "æ–°çš„Cookie"
```

### Q: å¯ä»¥åˆ†æç§å¯†è¯é¢˜å—ï¼Ÿ
**A**: å¦‚æœä½ çš„è´¦å·æœ‰æƒé™è®¿é—®ï¼Œå¯ä»¥ã€‚å¦åˆ™è¿™äº›å›å¤ä¼šè¢«è·³è¿‡ã€‚

### Q: è¾“å‡ºæ–‡ä»¶åœ¨å“ªï¼Ÿ
**A**: `./emoji_stats_output/` ç›®å½•ä¸‹

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Cookie å®‰å…¨**ï¼šä¸è¦åˆ†äº«ä½ çš„ Cookie æ–‡ä»¶
2. **è¯·æ±‚é¢‘ç‡**ï¼šé¿å…çŸ­æ—¶é—´å†…åˆ†æå¤§é‡ç”¨æˆ·
3. **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦èƒ½è®¿é—®æ°´æºç¤¾åŒº
4. **Python ç‰ˆæœ¬**ï¼šéœ€è¦ Python 3.6+

## ğŸ“¦ ä¾èµ–è¯´æ˜

- `requests` - HTTP è¯·æ±‚åº“
- `beautifulsoup4` - HTML è§£æåº“
- `urllib3` - é‡è¯•æœºåˆ¶ï¼ˆrequests çš„ä¾èµ–ï¼‰

æ‰€æœ‰ä¾èµ–éƒ½åœ¨ `requirements.txt` ä¸­ï¼Œè¿è¡Œ `pip install -r requirements.txt` å³å¯å®‰è£…ã€‚

## ğŸ‰ å¼€å§‹ä½¿ç”¨

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. è®¾ç½® Cookie
python user_emoji_stats.py --set-cookie "ä½ çš„Cookie"

# 3. åˆ†æç”¨æˆ·ï¼ˆå¿«é€Ÿé¢„è§ˆï¼‰
python user_emoji_stats.py krm_desuwa -p 3

# 4. æŸ¥çœ‹ç»“æœ
cd emoji_stats_output
```

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ˜€ğŸ‰

*ç‹¬ç«‹æ¨¡å— - ä¸ä¾èµ–å…¶ä»–ä»£ç *
